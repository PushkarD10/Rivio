imports:
  Merchant: Domain.Types.Merchant
  MerchantOperatingCity: Domain.Types.Merchant.MerchantOperatingCity
  HighPrecMoney: Kernel.Types.Common
  Currency: Kernel.Types.Common
  Minutes: Kernel.Types.Common

FullFarePolicyProgressiveDetailsPerMinRateSection:
  tableName: fare_policy_progressive_details_per_min_rate_section
  derives: "Generic,Show,Eq,ToJSON,FromJSON"
  fields:
    farePolicyId: Text
    rideDuration: Minutes
    perMinRate: HighPrecMoney
    currency: Currency

  beamFields:
    rideDuration:
      rideDurationInMin: Int

  fromTType:
    rideDuration: Kernel.Types.Common.Minutes rideDurationInMin|E

  toTType:
    rideDurationInMin: rideDuration & (.getMinutes)|E

  default:
    currency: "'INR'"

  constraints:
    farePolicyId: PrimaryKey
    rideDurationInMin: PrimaryKey

  excludedFields:
    - merchantOperatingCityId
    - merchantId

  queries:
    findAllByFarePolicyId:
      kvFunction: findAllWithKV
      where: farePolicyId

    deleteAllByFarePolicyId:
      kvFunction: deleteWithKV
      where: farePolicyId

  excludedDefaultQueries:
    - findByPrimaryKey
    - updateByPrimaryKey

