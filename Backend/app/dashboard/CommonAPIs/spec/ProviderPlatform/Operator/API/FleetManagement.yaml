imports:
  Person: Dashboard.Common
  City: Kernel.Types.Beckn.Context

module: FleetManagement
apiPrefix: operator

apis:
  - GET: # ListFleetsAPI
      endpoint: /fleets
      auth: ApiAuthV2
      query:
        - isActive: Bool
        - verified: Bool
        - limit: Int
        - offset: Int
      response:
        type: "[FleetInfo]"
      helperApi:
        - GET:
            endpoint: /fleets
            auth: ApiAuthV2
            query:
              - isActive: Bool
              - verified: Bool
              - limit: Int
              - offset: Int
            mandatoryQuery:
              - requestorId: Text
            response:
              type: "[FleetInfo]"

  - POST:
      endpoint: /fleet/create
      auth: ApiAuthV2
      request:
        type: FleetOwnerCreateReq
      response:
        type: APISuccess
      helperApi:
        - POST:
            endpoint: /fleet/create
            auth: ApiAuthV2
            mandatoryQuery:
              - requestorId: Text
            request:
              type: FleetOwnerCreateReq
            response:
              type: FleetOwnerCreateRes
  - POST:
      endpoint: /fleet/register
      auth: ApiAuthV2
      request:
        type: FleetOwnerRegisterReq
      response:
        type: APISuccess
      helperApi:
        - POST:
            endpoint: /fleet/register
            auth: ApiAuthV2
            mandatoryQuery:
              - requestorId: Text
            request:
              type: FleetOwnerRegisterReq
            response:
              type: APISuccess

types:
  FleetInfo:
    - id: Id Person
    - name: Text
    - isActive: Bool
    - mobileCountryCode: Text
    - mobileNumber: Text
    - vehicleCount: Int
    - verified: Bool
  FleetOwnerRegisterReq:
    - firstName: Text
    - lastName: Text
    - personId: Id Person
    - email: Maybe Text
    - fleetType: Maybe FleetType
    - panNumber: Maybe Text
    - gstNumber: Maybe Text
    - businessLicenseNumber: Maybe Text
    - panImageId1: Maybe Text
    - panImageId2: Maybe Text
    - gstCertificateImage: Maybe Text
    - businessLicenseImage: Maybe Text
  FleetOwnerRegisterTReq: # hide secrets
    - firstName: Text
    - lastName: Text
    - personId: Id Person
    - fleetType: Maybe FleetType
  FleetType:
    - enum: "RENTAL_FLEET,NORMAL_FLEET,BUSINESS_FLEET"
  FleetOwnerCreateReq:
    - mobileNumber: Text
    - mobileCountryCode: Text
  FleetOwnerCreateRes:
    - personId: Id Person
    - recordType: NewType
    - derive: "'HideSecrets"

extraOperations:
  - EXTRA_API_TYPES_FILE
