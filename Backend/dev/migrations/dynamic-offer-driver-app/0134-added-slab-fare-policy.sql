CREATE TABLE atlas_driver_offer_bpp.slab_fare_policy (
id character(36) NOT NULL,
merchant_id character (36) NOT NULL,

vehicle_variant text NOT NULL,

night_shift_start time without time zone,
night_shift_end time without time zone,
night_shift_rate double precision,

min_allowed_trip_distance integer,
max_allowed_trip_distance integer,

service_charge integer NOT NULL,
fare_slabs text[] NOT NULL,
govt_charges_perc int,

created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
,CONSTRAINT  slab_fare_policy_merchant_id_fkey FOREIGN KEY (merchant_id) REFERENCES atlas_driver_offer_bpp.merchant(id)
);
alter table atlas_driver_offer_bpp.fare_parameters add column govt_charges_perc int;
-- Array ['Slab { startMeters = -1, endMeters = 2000, fare = 30, waitingCharge = 15, nightCharge=5}', 'Slab { startMeters = 2000, endMeters = 4000, fare = 60, waitingCharge = 15, nightCharge=10}', 'Slab { startMeters = 4000, endMeters = 6000, fare = 90, waitingCharge = 15, nightCharge=15}', 'Slab { startMeters = 6000, endMeters = 8000, fare = 120, waitingCharge = 20, nightCharge=20}', 'Slab { startMeters = 8000, endMeters = 10000, fare = 150, waitingCharge = 20, nightCharge=25}','Slab { startMeters = 10000, endMeters = 12000, fare = 180, waitingCharge = 20, nightCharge=30}','Slab { startMeters = 12000, endMeters = 14000, fare = 210, waitingCharge = 20, nightCharge=35}', 'Slab { startMeters = 14000, endMeters = 16000, fare = 240, waitingCharge = 20, nightCharge=40}', 'Slab { startMeters = 16000, endMeters = 18000, fare = 270, waitingCharge = 20, nightCharge=40}', 'Slab { startMeters = 18000, endMeters = 20000, fare = 300, waitingCharge = 20, nightCharge=50}', 'Slab { startMeters = 20000, endMeters = 23000, fare = 345, waitingCharge = 20, nightCharge=55}', 'Slab { startMeters = 23000, endMeters = 26000, fare = 390, waitingCharge = 20, nightCharge=60}', 'Slab { startMeters = 26000, endMeters = 29000, fare = 435, waitingCharge = 20, nightCharge=65}','Slab { startMeters = 29000, endMeters = 32000, fare = 480, waitingCharge = 20, nightCharge=75}', 'Slab { startMeters = 32000, endMeters = 35000, fare = 525, waitingCharge = 20, nightCharge=80}', 'Slab { startMeters = 35000, endMeters = 120000, fare = 570, waitingCharge = 20, nightCharge=90}']


-- INSERT INTO atlas_driver_offer_bpp.slab_fare_policy (id, merchant_id, vehicle_variant, night_shift_start, night_shift_end, night_shift_rate, min_allowed_trip_distance, max_allowed_trip_distance, waiting_or_pickup_charges, service_charge, fare_slabs, created_at, updated_at)
--     (SELECT
--         atlas_driver_offer_bpp.uuid_generate_v4(),
--         T1.id,
--         unnest (T1.exo_phones),
--         unnest (T1.exo_phones),
--         {}
--         now(),
--         now()
--     FROM atlas_driver_offer_bpp.merchant AS T1)
--     ON CONFLICT DO NOTHING;



INSERT INTO atlas_driver_offer_bpp.slab_fare_policy (id, merchant_id, vehicle_variant, night_shift_start, night_shift_end, night_shift_rate, min_allowed_trip_distance, max_allowed_trip_distance, service_charge, fare_slabs, created_at, updated_at) VALUES ('a5e77f37-75e5-4665-8fd0-4be2af35640a', 'favorit0-0000-0000-0000-00000favorit', 'SEDAN', NULL, NULL,1 , 0, 38000, 0, Array ['Slab { startMeters = 0, endMeters = 2000, fare = 30, waitingCharge = 15}', 'Slab { startMeters = 2000, endMeters = 4000, fare = 60, waitingCharge =15}', 'Slab { startMeters = 4000, endMeters = 6000, fare = 90, waitingCharge = 15}', 'Slab { startMeters = 6000, endMeters = 8000, fare = 120, waitingCharge = 20}', 'Slab { startMeters = 8000, endMeters = 10000, fare = 150, waitingCharge = 20}','Slab { startMeters = 10000, endMeters = 12000, fare = 180, waitingCharge = 20}','Slab { startMeters = 12000, endMeters = 14000, fare = 210, waitingCharge = 20}', 'Slab { startMeters = 14000, endMeters = 16000, fare = 240, waitingCharge = 20}', 'Slab { startMeters = 16000, endMeters = 18000, fare = 270, waitingCharge = 20}', 'Slab { startMeters = 18000, endMeters = 20000, fare = 300, waitingCharge = 20}', 'Slab { startMeters = 20000, endMeters = 23000, fare = 345, waitingCharge = 20}', 'Slab { startMeters = 23000, endMeters = 26000, fare = 390, waitingCharge = 20}', 'Slab { startMeters = 26000, endMeters = 29000, fare = 435, waitingCharge = 20}','Slab { startMeters = 29000, endMeters = 32000, fare = 480, waitingCharge = 20}', 'Slab { startMeters = 32000, endMeters = 35000, fare = 525, waitingCharge = 20}', 'Slab { startMeters = 35000, endMeters = 38000, fare = 570, waitingCharge = 20}'], now(), now());
INSERT INTO atlas_driver_offer_bpp.slab_fare_policy (id, merchant_id, vehicle_variant, night_shift_start, night_shift_end, night_shift_rate, min_allowed_trip_distance, max_allowed_trip_distance, service_charge, fare_slabs, created_at, updated_at) VALUES ('a4e77f37-75e5-4665-8fd0-4be2af35640a', 'favorit0-0000-0000-0000-00000favorit', 'SUV', NULL, NULL,1 , 0, 38000, 0, Array ['Slab { startMeters = 0, endMeters = 2000, fare = 30, waitingCharge = 15}', 'Slab { startMeters = 2000, endMeters = 4000, fare = 60, waitingCharge =15}', 'Slab { startMeters = 4000, endMeters = 6000, fare = 90, waitingCharge = 15}', 'Slab { startMeters = 6000, endMeters = 8000, fare = 120, waitingCharge = 20}', 'Slab { startMeters = 8000, endMeters = 10000, fare = 150, waitingCharge = 20}','Slab { startMeters = 10000, endMeters = 12000, fare = 180, waitingCharge = 20}','Slab { startMeters = 12000, endMeters = 14000, fare = 210, waitingCharge = 20}', 'Slab { startMeters = 14000, endMeters = 16000, fare = 240, waitingCharge = 20}', 'Slab { startMeters = 16000, endMeters = 18000, fare = 270, waitingCharge = 20}', 'Slab { startMeters = 18000, endMeters = 20000, fare = 300, waitingCharge = 20}', 'Slab { startMeters = 20000, endMeters = 23000, fare = 345, waitingCharge = 20}', 'Slab { startMeters = 23000, endMeters = 26000, fare = 390, waitingCharge = 20}', 'Slab { startMeters = 26000, endMeters = 29000, fare = 435, waitingCharge = 20}','Slab { startMeters = 29000, endMeters = 32000, fare = 480, waitingCharge = 20}', 'Slab { startMeters = 32000, endMeters = 35000, fare = 525, waitingCharge = 20}', 'Slab { startMeters = 35000, endMeters = 38000, fare = 570, waitingCharge = 20}'], now(), now());
INSERT INTO atlas_driver_offer_bpp.slab_fare_policy (id, merchant_id, vehicle_variant, night_shift_start, night_shift_end, night_shift_rate, min_allowed_trip_distance, max_allowed_trip_distance, service_charge, fare_slabs, created_at, updated_at) VALUES ('a3e77f37-75e5-4665-8fd0-4be2af35640a', 'favorit0-0000-0000-0000-00000favorit', 'HATCHBACK', NULL, NULL,1 , 0, 38000, 0, Array ['Slab { startMeters = 0, endMeters = 2000, fare = 30, waitingCharge = 15}', 'Slab { startMeters = 2000, endMeters = 4000, fare = 60, waitingCharge =15}', 'Slab { startMeters = 4000, endMeters = 6000, fare = 90, waitingCharge = 15}', 'Slab { startMeters = 6000, endMeters = 8000, fare = 120, waitingCharge = 20}', 'Slab { startMeters = 8000, endMeters = 10000, fare = 150, waitingCharge = 20}','Slab { startMeters = 10000, endMeters = 12000, fare = 180, waitingCharge = 20}','Slab { startMeters = 12000, endMeters = 14000, fare = 210, waitingCharge = 20}', 'Slab { startMeters = 14000, endMeters = 16000, fare = 240, waitingCharge = 20}', 'Slab { startMeters = 16000, endMeters = 18000, fare = 270, waitingCharge = 20}', 'Slab { startMeters = 18000, endMeters = 20000, fare = 300, waitingCharge = 20}', 'Slab { startMeters = 20000, endMeters = 23000, fare = 345, waitingCharge = 20}', 'Slab { startMeters = 23000, endMeters = 26000, fare = 390, waitingCharge = 20}', 'Slab { startMeters = 26000, endMeters = 29000, fare = 435, waitingCharge = 20}','Slab { startMeters = 29000, endMeters = 32000, fare = 480, waitingCharge = 20}', 'Slab { startMeters = 32000, endMeters = 35000, fare = 525, waitingCharge = 20}', 'Slab { startMeters = 35000, endMeters = 38000, fare = 570, waitingCharge = 20}'], now(), now());
INSERT INTO atlas_driver_offer_bpp.slab_fare_policy (id, merchant_id, vehicle_variant, night_shift_start, night_shift_end, night_shift_rate, min_allowed_trip_distance, max_allowed_trip_distance, service_charge, fare_slabs, created_at, updated_at) VALUES ('a2e77f37-75e5-4665-8fd0-4be2af35640a', 'favorit0-0000-0000-0000-00000favorit', 'AUTO_RICKSHAW', NULL, NULL,1 , 0, 38000, 0, Array ['Slab { startMeters = 0, endMeters = 2000, fare = 30, waitingCharge = 15}', 'Slab { startMeters = 2000, endMeters = 4000, fare = 60, waitingCharge =15}', 'Slab { startMeters = 4000, endMeters = 6000, fare = 90, waitingCharge = 15}', 'Slab { startMeters = 6000, endMeters = 8000, fare = 120, waitingCharge = 20}', 'Slab { startMeters = 8000, endMeters = 10000, fare = 150, waitingCharge = 20}','Slab { startMeters = 10000, endMeters = 12000, fare = 180, waitingCharge = 20}','Slab { startMeters = 12000, endMeters = 14000, fare = 210, waitingCharge = 20}', 'Slab { startMeters = 14000, endMeters = 16000, fare = 240, waitingCharge = 20}', 'Slab { startMeters = 16000, endMeters = 18000, fare = 270, waitingCharge = 20}', 'Slab { startMeters = 18000, endMeters = 20000, fare = 300, waitingCharge = 20}', 'Slab { startMeters = 20000, endMeters = 23000, fare = 345, waitingCharge = 20}', 'Slab { startMeters = 23000, endMeters = 26000, fare = 390, waitingCharge = 20}', 'Slab { startMeters = 26000, endMeters = 29000, fare = 435, waitingCharge = 20}','Slab { startMeters = 29000, endMeters = 32000, fare = 480, waitingCharge = 20}', 'Slab { startMeters = 32000, endMeters = 35000, fare = 525, waitingCharge = 20}', 'Slab { startMeters = 35000, endMeters = 38000, fare = 570, waitingCharge = 20}'], now(), now());
INSERT INTO atlas_driver_offer_bpp.slab_fare_policy (id, merchant_id, vehicle_variant, night_shift_start, night_shift_end, night_shift_rate, min_allowed_trip_distance, max_allowed_trip_distance, service_charge, fare_slabs, created_at, updated_at) VALUES ('a6e77f37-75e5-4665-8fd0-4be2af35640a', 'favorit0-0000-0000-0000-00000favorit', 'BIKE', NULL, NULL,1 , 0, 38000, 0, Array ['Slab { startMeters = 0, endMeters = 2000, fare = 30, waitingCharge = 15}', 'Slab { startMeters = 2000, endMeters = 4000, fare = 60, waitingCharge =15}', 'Slab { startMeters = 4000, endMeters = 6000, fare = 90, waitingCharge = 15}', 'Slab { startMeters = 6000, endMeters = 8000, fare = 120, waitingCharge = 20}', 'Slab { startMeters = 8000, endMeters = 10000, fare = 150, waitingCharge = 20}','Slab { startMeters = 10000, endMeters = 12000, fare = 180, waitingCharge = 20}','Slab { startMeters = 12000, endMeters = 14000, fare = 210, waitingCharge = 20}', 'Slab { startMeters = 14000, endMeters = 16000, fare = 240, waitingCharge = 20}', 'Slab { startMeters = 16000, endMeters = 18000, fare = 270, waitingCharge = 20}', 'Slab { startMeters = 18000, endMeters = 20000, fare = 300, waitingCharge = 20}', 'Slab { startMeters = 20000, endMeters = 23000, fare = 345, waitingCharge = 20}', 'Slab { startMeters = 23000, endMeters = 26000, fare = 390, waitingCharge = 20}', 'Slab { startMeters = 26000, endMeters = 29000, fare = 435, waitingCharge = 20}','Slab { startMeters = 29000, endMeters = 32000, fare = 480, waitingCharge = 20}', 'Slab { startMeters = 32000, endMeters = 35000, fare = 525, waitingCharge = 20}', 'Slab { startMeters = 35000, endMeters = 38000, fare = 570, waitingCharge = 20}'], now(), now());
